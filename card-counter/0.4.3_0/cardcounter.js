function askLimit(t){var i=prompt("Enter the limit (number), use 0 to remove the limit.",getLimit(listId)>0?getLimit(listId):10);saveLimit(parseInt(i))}function getLimit(t){return localStorage["cardcounter."+boardId+"."+t]}function saveLimit(t){localStorage["cardcounter."+boardId+"."+listId]=t,0===t&&delete getLimit(listId)}function countCards(t){var i=$(this),e=$(".board-title").text().trim()+"/"+$("h2",i).text().replace(" ","_"),a=($(".list-header",i),getLimit(e)?getLimit(e):0),l=$(".list-header-name",i),n=l.text().match(/\[(\d*)\]/);l&&n&&2==n.length&&(a=n[1]);var s,o=0,r=0,d=$(".list-card",i);d.each(function(){s=$(this).find(".list-card-title:eq(0)").text(),s.match(/#[0-9]* ==*/g)?r++:$(this).parent().parent().hasClass("hide")||o++});var c=$(".cardCounter",i);0==c.length&&(c=c=$("<span>",{"class":"cardCounter"}).appendTo(i.find("h2"))),c.text(a>0?o.toString()+"/"+a.toString():o.toString()),($(".badge-points").length>0||$(".list-total .points",i).length>0)&&c.addClass("align-right"),a>0&&o>a?c.addClass("limitReached"):c.removeClass("limitReached")}var listId,boardId,donateButton=' - <a href="https://blockchain.info/address/1Kn2QEV43dbtwaSzfom6JSMZorjWMHGF6A" style="display: inline-block;" target="blank">Please donate</span>';$(document).ready(function(){var t=0,i=window.location.href.match(/\/(.{8})\//);i&&i.length>1&&(boardId=i[1]),function e(){$(".list").each(countCards),$(".list").length!=t&&(t=$(".list").length),$(".js-open-list-menu").unbind().click(function(){listId=$(".board-title").text().trim()+"/"+$(this).prevAll("h2").text().replace(" ","_"),$(".js-limit-list").remove(),setTimeout(function(){$(".js-close-list").after('<li class="js-limit-list"><a href"#" style="display: inline-block;">Set Limits for this List</a> '+donateButton+"</li>"),$(".js-limit-list a:eq(0)").click(askLimit)},50)}),setTimeout(e,1e3)}()});