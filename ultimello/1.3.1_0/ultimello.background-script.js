(function(){var g,e,l;this.ultimello={};this.ultimello.utils={ns:function(a){var b,c,d,f;b=a.split(".");a=window[b[0]];void 0===a&&(a=window[b[0]]={});c=b.slice(1);d=0;for(f=c.length;d<f;d++)b=c[d],a=a[b]=a[b]||{};return a},mixin:function(a,b){for(var c in b)a[c]=b[c];return a},toArray:function(a){var b;b=a;a.constructor!==Array&&(b=[a]);return b},getBufferedFn:function(a,b){var c,d;d=null;c=function(){d=null;return a()};return function(){null!=d&&(clearTimeout(d),d=null);return d=setTimeout(c,b)}},
mutationRecordsHasElement:function(a,b){var c=this;return a.some(function(a){return c.mutationRecordHasElement(a,b)})},mutationRecordHasElement:function(a,b){return["addedNodes","removedNodes"].some(function(c){return $.makeArray(a[c]).some(function(a){return $(a).hasClass(b)})})},orderElementsAsInList:function(a,b){var c,d,f,e,h,g,k;e=[];k=a.slice(0,-1);d=h=0;for(g=k.length;h<g;d=++h)c=k[d],c=b(c),f=b(a[d+1]),c&&f&&($(f).insertAfter(c),e[d]=c,e[d+1]=f);return e},openTab:function(a){return chrome.tabs.create({url:chrome.extension.getURL(a)})}};
ultimello.utils.ns("ultimello.utils");ultimello.utils.storage={load:function(a){a=localStorage[this._key(a)];return null!=a?JSON.parse(a):null},save:function(a,b){var c;c=this._key(a);return null==b?delete localStorage[c]:localStorage[c]=JSON.stringify(b)},_key:function(a){return"ultimello_"+a}};e=ultimello.utils;g={storage:e.storage};chrome.runtime.onMessage.addListener(function(a,b,c){b=g[a.facility];a=null!=b?b[a.method].apply(b,a.params||[]):null;return c(a)});chrome.browserAction.onClicked.addListener(function(a){return e.openTab("settings.html")});
!e.storage.load("installed-version")&&e.openTab("settings.html");l=chrome.runtime.getManifest().version;e.storage.save("installed-version",l)}).call(this);
